{% extends "dashboard/base.html" %}
{% load i18n static %}

{% block title %}{% trans 'Meals' %}{% endblock %}

{% block content %}


<h1 class=" mb-5 text-center">
{% if nb_of_groups != 1 %}
{% trans "All Meals" %}
{% else %}
{% trans "Meals of " %}{{group.name}}
{% endif %}
</h1>

{% if menus %}
<div class="d-flex mt-5 pt-5 justify-content-center flex-wrap ">
  {% for menu in menus %}
    <div class="card card-recipe shadow mx-2">
      <div class="row justify-content-center">
        <div class="col-lg-3 order-lg-2">
          <div class="card-recipe-image">
            {% if menu.picture %}
              <img src="{{ menu.picture.url }}">
            {% else %}
              <img src="{% static 'assets/img/illustrations/meal_default.jpeg' %}" alt="Meal picture"  >
            {% endif %}
          </div>
        </div>
      </div>
      
      <div class="card-body pt-0 pt-md-4">
        
        <div class="text-center">
          <h3>
            {{menu.eaten_at|date:"d M Y"}}
          </h3>
          <a href="{% url 'add-recipe-to-menu' menu.slug%}" class="card-recipe-btn-small">{% trans 'Dishes' %} <i class="fa-solid fa-plus fa-xs"></i></a>
          {% for recipe in menu.recipes.all %}
          <a href="{% url 'recipe-detail' recipe.slug %}" class="darkest-color">
            <div class="d-flex justify-content-between align-items-center">
              <div>
                {% if recipe.picture%}
                <img src="{{recipe.picture.url}}" class="rounded-circle small-img">
                {% endif %}
              </div>
              <div>
                <p class="my-auto">{{recipe.name}}</p>
              </div>
              <div>
              {% if recipe.averagereview != None %}
                {{recipe.averagereview}}
              {% endif %}
              </div>
            </div>
          </a>
          {% endfor %}
          <hr class="my-4">

          <a href="{% url 'add-music' menu.slug%}" class="card-recipe-btn-small">{% trans 'Music' %} <i class="fa-solid fa-plus fa-xs"></i></a>
          {% for music in menu.musics.all %}
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <p class="my-auto">{{music.title}}</p>
            </div>
            <div>
              {{music.artist}}
            </div>
          </div>
          {% endfor %}

          <hr class="my-4">

          <a href="{% url 'add-anecdote' menu.slug%}" class="card-recipe-btn-small">{% trans 'Anecdotes' %} <i class="fa-solid fa-plus fa-xs"></i></a>
          {% for anecdote in menu.anecdotes.all %}
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <p class="my-auto">{{anecdote.message}}</p>
            </div>
            
          </div>
          {% endfor %}
          
          
        </div>
      </div>
    </div>
  {% endfor %}
</div>
{% else %}
<div class="d-flex p-2 justify-content-center flex-wrap">
<a class="btn" href="{% url 'add-menu' %}">
        <div class="sketch-box">
            <div class="card-cta border-0 sketch-box">
                <img class="card-icon mx-auto" src="{% static 'assets/img/icons/add-100.png' %}" alt="Card image cap" width="100px" >
                <div class="card-body">
                {% trans 'ADD FIRST MEAL' %}
                </div>
            </div>
        </div>
</a>
</div>
{% endif %}

<!-- Floating button -->
<a href="{% url 'add-menu' %}">
<div class="kfloat" data-bs-toggle="tooltip" title="{% trans 'Add Meal' %}">
<div class="my-float">+</div>
</div>
</a>
 

{% endblock %}